{"ast":null,"code":"var _jsxFileName = \"/home/estefania/Escritorio/front/src/componentes/Newej.jsx\",\n    _s = $RefreshSig$();\n\nimport { Card, CardContent, Grid, TextField, Typography, Box, IconButton, Button, Input } from \"@mui/material\";\nimport '../hojas-de-estilo/New_Ej.css';\nimport React, { useState, useEffect } from 'react';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction NuevoEjemplar() {\n  _s();\n\n  const [datos, setDatos] = useState([]);\n  const params2 = useParams();\n\n  const cargarDatos = async correo => {\n    const response = await fetch(`http://localhost:4000/Usuario2/${correo}`);\n    const data = await response.json();\n    setDatos(data);\n    console.log(data);\n  };\n\n  useEffect(() => {\n    if (params2.correo) {\n      cargarDatos(params2.correo);\n    }\n  }, [params2.correo]);\n  const [ejemplar, setEjemplar] = useState({\n    titulo: \"\",\n    sinopsis: \"\",\n    editorial: \"\",\n    autor: \"\",\n    anioedicion: \"\",\n    tipoencuadernado: \"\",\n    genero: \"\",\n    stock: \"\",\n    precioactual: \"\",\n    isbn: \"\",\n    img: \"\"\n  });\n  const [editing, setEditing] = useState(false);\n  const params = useParams();\n\n  const handleSubmit = async e => {\n    if (editing) {\n      await fetch(`http://localhost:4000/Ejemplar/${params.id_ejemplar}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(ejemplar)\n      });\n      console.log('esta bienn');\n    } else {\n      console.log(ejemplar);\n      await fetch(\"http://localhost:4000/Ejemplar\", {\n        method: \"POST\",\n        body: JSON.stringify(ejemplar),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n    }\n\n    {\n      window.location.href = `http://localhost:3000/homeadmin/${datos.correo}`;\n    }\n  };\n\n  const handleChange = e => setEjemplar({ ...ejemplar,\n    [e.target.name]: e.target.value\n  });\n\n  const handleChangeImg = (e, filename) => setEjemplar({ ...ejemplar,\n    [e.target.name]: filename\n  });\n\n  const loadEjemplar = async id_ejemplar => {\n    const res = await fetch(`http://localhost:4000/Ejemplar/${id_ejemplar}`);\n    const data = await res.json();\n    console.log(data);\n    setEjemplar({\n      titulo: data.titulo,\n      sinopsis: data.sinopsis,\n      editorial: data.editorial,\n      autor: data.autor,\n      anioedicion: data.anioedicion,\n      tipoencuadernado: data.tipoencuadernado,\n      genero: data.genero,\n      stock: data.stock,\n      precioactual: data.precioactual,\n      img: data.img,\n      isbn: data.isbn\n    });\n    setEditing(true);\n  };\n\n  useEffect(() => {\n    if (params.id_ejemplar) {\n      loadEjemplar(params.id_ejemplar);\n    }\n  }, [params.id_ejemplar]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contenedor-nuevoej\",\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"column\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 3,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            mt: 5\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              name: \"form-ejemplar\",\n              id: \"form-ejemplar\",\n              onSubmit: e => {\n                e.preventDefault();\n                handleSubmit();\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                children: editing ? 'Editar Ejemplar' : 'Nuevo Ejemplar'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  '& > :not(style)': {\n                    m: 1,\n                    width: '78ch'\n                  }\n                },\n                noValidate: true,\n                autoComplete: \"off\",\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  fullWidth: true,\n                  id: \"outlined-basic\",\n                  label: \"T\\xEDtulo\",\n                  variant: \"outlined\",\n                  value: ejemplar.titulo,\n                  sx: {\n                    display: 'block',\n                    margin: '.5 rem 0'\n                  },\n                  name: \"titulo\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  fullWidth: true,\n                  variant: \"outlined\",\n                  value: ejemplar.sinopsis,\n                  label: \"Sinopsis\",\n                  multiline: true,\n                  rows: 5,\n                  sx: {\n                    display: 'block',\n                    margin: '.5 rem 0'\n                  },\n                  name: \"sinopsis\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  '& > :not(style)': {\n                    m: 1,\n                    width: '220px'\n                  }\n                },\n                noValidate: true,\n                autoComplete: \"off\",\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  variant: \"outlined\",\n                  value: ejemplar.editorial,\n                  label: \"Editorial\",\n                  name: \"editorial\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"Autor\",\n                  variant: \"outlined\",\n                  value: ejemplar.autor,\n                  name: \"autor\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"A\\xF1o de edici\\xF3n\",\n                  variant: \"outlined\",\n                  value: ejemplar.anioedicion,\n                  name: \"anioedicion\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  '& > :not(style)': {\n                    m: 1,\n                    width: '220px'\n                  }\n                },\n                noValidate: true,\n                autoComplete: \"off\",\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"Tipo de encuadernaci\\xF3n\",\n                  variant: \"outlined\",\n                  value: ejemplar.tipoencuadernado,\n                  name: \"tipoencuadernado\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"Genero\",\n                  variant: \"outlined\",\n                  value: ejemplar.genero,\n                  name: \"genero\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"Stock\",\n                  variant: \"outlined\",\n                  value: ejemplar.stock,\n                  sx: {\n                    margin: '.5 rem 1'\n                  },\n                  name: \"stock\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  '& > :not(style)': {\n                    m: 1,\n                    width: '220px'\n                  }\n                },\n                noValidate: true,\n                autoComplete: \"off\",\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"Precio\",\n                  variant: \"outlined\",\n                  value: ejemplar.precioactual,\n                  name: \"precioactual\",\n                  onChange: handleChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                  margin: \"normal\",\n                  id: \"outlined-basic\",\n                  label: \"ISBN\",\n                  variant: \"outlined\",\n                  value: ejemplar.isbn,\n                  name: \"isbn\",\n                  onChange: handleChange,\n                  helperText: \"ISBN de 13 n\\xFAmeros\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"icon-button-file\",\n                  children: [/*#__PURE__*/_jsxDEV(Input, {\n                    accept: \"image/*\",\n                    id: \"icon-button-file\",\n                    type: \"file\",\n                    onChange: e => {\n                      //handleChange\n                      var filename = e.target.value.match(/[^\\\\/]*$/)[0];\n                      console.log(filename);\n                      handleChangeImg(e, filename);\n                    },\n                    name: \"img\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 41\n                  }, this), editing ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    height: \"50\",\n                    width: 50,\n                    src: require(`../imagenes/${ejemplar.img}`) ? require(`../imagenes/${ejemplar.img}`) : \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 46\n                  }, this) : null, /*#__PURE__*/_jsxDEV(IconButton, {\n                    color: \"secondary\",\n                    \"aria-label\": \"upload picture\",\n                    component: \"span\",\n                    children: /*#__PURE__*/_jsxDEV(PhotoCamera, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 257,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"secondary\",\n                  type: \"submit\",\n                  htmlFor: \"form-ejemplar\",\n                  sx: {\n                    display: 'block',\n                    margin: '.5 rem 0'\n                  },\n                  children: \"Publicar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n\n_s(NuevoEjemplar, \"/TamvUoYvIBmicVlhyovjl2Ubh4=\", false, function () {\n  return [useParams, useParams];\n});\n\n_c = NuevoEjemplar;\nexport default NuevoEjemplar;\n\nvar _c;\n\n$RefreshReg$(_c, \"NuevoEjemplar\");","map":{"version":3,"sources":["/home/estefania/Escritorio/front/src/componentes/Newej.jsx"],"names":["Card","CardContent","Grid","TextField","Typography","Box","IconButton","Button","Input","React","useState","useEffect","PhotoCamera","useParams","NuevoEjemplar","datos","setDatos","params2","cargarDatos","correo","response","fetch","data","json","console","log","ejemplar","setEjemplar","titulo","sinopsis","editorial","autor","anioedicion","tipoencuadernado","genero","stock","precioactual","isbn","img","editing","setEditing","params","handleSubmit","e","id_ejemplar","method","headers","body","JSON","stringify","window","location","href","handleChange","target","name","value","handleChangeImg","filename","loadEjemplar","res","mt","preventDefault","m","width","display","margin","match","require"],"mappings":"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","sourcesContent":["import { Card, CardContent, Grid, TextField, Typography, Box, IconButton, Button, Input } from \"@mui/material\"\nimport '../hojas-de-estilo/New_Ej.css';\nimport React, { useState, useEffect } from 'react';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport { useParams } from 'react-router-dom';\n\n\nfunction NuevoEjemplar() {\n   \n    const [datos, setDatos] = useState ([])\n    const params2 = useParams();\n\n    const cargarDatos = async (correo) => {\n        const response = await fetch(`http://localhost:4000/Usuario2/${correo}`)\n        const data = await response.json()\n        setDatos(data);\n        console.log(data)\n    };\n\n    useEffect(() => {\n        if (params2.correo) {\n            cargarDatos(params2.correo)\n        }\n    }, [params2.correo])\n\n    const [ejemplar, setEjemplar] = useState({\n        titulo: \"\",\n        sinopsis: \"\",\n        editorial: \"\",\n        autor: \"\",\n        anioedicion: \"\",\n        tipoencuadernado: \"\",\n        genero: \"\",\n        stock: \"\",\n        precioactual: \"\",\n        isbn: \"\",\n        img: \"\",\n    });\n\n    const [editing, setEditing] = useState(false);\n    const params = useParams();\n\n    const handleSubmit = async (e) => {\n\n        if (editing) {\n            await fetch(`http://localhost:4000/Ejemplar/${params.id_ejemplar}`, {\n                method: \"PUT\",\n                headers: { \"Content-Type\": \"application/json\" }, \n                body: JSON.stringify(ejemplar),\n                \n            })\n            console.log('esta bienn');\n        } else {\n            console.log(ejemplar);\n            await fetch(\"http://localhost:4000/Ejemplar\", {\n                method: \"POST\",\n                body: JSON.stringify(ejemplar),\n                headers: { \"Content-Type\": \"application/json\" },\n            });\n        }\n        { window.location.href = `http://localhost:3000/homeadmin/${datos.correo}`}\n    };\n\n    const handleChange = (e) =>\n        setEjemplar({ ...ejemplar, [e.target.name]: e.target.value });\n \n    const handleChangeImg = (e, filename) =>\n        setEjemplar({ ...ejemplar, [e.target.name]: filename });\n\n    const loadEjemplar = async (id_ejemplar) => {\n        const res = await fetch(`http://localhost:4000/Ejemplar/${id_ejemplar}`)\n        const data = await res.json()\n        console.log(data)\n        setEjemplar({ titulo: data.titulo, sinopsis: data.sinopsis, editorial: data.editorial, autor: data.autor, anioedicion: data.anioedicion, tipoencuadernado: data.tipoencuadernado, genero: data.genero, stock: data.stock, precioactual: data.precioactual,img: data.img, isbn: data.isbn, })\n        setEditing(true)\n    };\n\n    useEffect(() => {\n        if (params.id_ejemplar) {\n            loadEjemplar(params.id_ejemplar);\n        }\n    }, [params.id_ejemplar])\n\n    return (\n        <div className=\"contenedor-nuevoej\">\n            <Grid container\n                direction=\"column\"\n                alignItems='center'\n                justifyContent=\"center\"\n            >\n                <Grid item xs={3}>\n                    <Card sx={{ mt: 5 }}>\n                        <CardContent>\n\n                            <form name=\"form-ejemplar\" id=\"form-ejemplar\" onSubmit={(e) => {\n                                e.preventDefault();\n                                handleSubmit()\n                            }}>\n                                <Typography >\n                                    {editing ? 'Editar Ejemplar' : 'Nuevo Ejemplar'}\n                                </Typography>\n                                <Box\n\n                                    sx={{\n                                        '& > :not(style)': { m: 1, width: '78ch' },\n                                    }}\n                                    noValidate\n                                    autoComplete=\"off\"\n                                >\n                                    <TextField margin=\"normal\" fullWidth\n                                        id=\"outlined-basic\"\n                                        label=\"Título\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.titulo}\n                                        sx={{\n                                            display: 'block',\n                                            margin: '.5 rem 0'\n                                        }}\n                                        name=\"titulo\"\n                                        onChange={handleChange}\n                                    />\n                                    <TextField margin=\"normal\" fullWidth\n                                        variant=\"outlined\"\n                                        value={ejemplar.sinopsis}\n                                        label=\"Sinopsis\"\n                                        multiline\n                                        rows={5}\n                                        sx={{\n                                            display: 'block',\n                                            margin: '.5 rem 0'\n                                        }}\n                                        name=\"sinopsis\"\n                                        onChange={handleChange}\n                                    />\n                                </Box>\n\n                                <Box\n                                    sx={{\n                                        '& > :not(style)': { m: 1, width: '220px' },\n                                    }}\n                                    noValidate\n                                    autoComplete=\"off\"\n                                >\n\n                                    <TextField margin=\"normal\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.editorial}\n                                        label=\"Editorial\"\n                                        name=\"editorial\"\n                                        onChange={handleChange}\n                                    />\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"Autor\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.autor}\n                                        name=\"autor\"\n                                        onChange={handleChange}\n                                    />\n\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"Año de edición\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.anioedicion}\n                                        name=\"anioedicion\"\n                                        onChange={handleChange}\n                                    />\n                                </Box>\n\n\n                                <Box\n                                    sx={{\n                                        '& > :not(style)': { m: 1, width: '220px' },\n                                    }}\n                                    noValidate\n                                    autoComplete=\"off\"\n                                >\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"Tipo de encuadernación\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.tipoencuadernado}\n                                        name=\"tipoencuadernado\"\n                                        onChange={handleChange}\n                                    />\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"Genero\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.genero}\n                                        name=\"genero\"\n                                        onChange={handleChange}\n                                    />\n\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"Stock\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.stock}\n                                        sx={{\n\n                                            margin: '.5 rem 1'\n                                        }}\n                                        name=\"stock\"\n                                        onChange={handleChange}\n                                    />\n                                </Box>\n\n\n                                <Box\n\n                                    sx={{\n                                        '& > :not(style)': { m: 1, width: '220px' },\n                                    }}\n                                    noValidate\n                                    autoComplete=\"off\"\n                                >\n\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"Precio\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.precioactual}\n                                        name=\"precioactual\"\n                                        onChange={handleChange}\n                                    />\n\n                                    <TextField margin=\"normal\"\n                                        id=\"outlined-basic\"\n                                        label=\"ISBN\"\n                                        variant=\"outlined\"\n                                        value={ejemplar.isbn}\n                                        name=\"isbn\"\n                                        onChange={handleChange}\n                                        helperText=\"ISBN de 13 números\"\n                                    />\n\n\n                                    <label htmlFor=\"icon-button-file\"  >\n                                        <Input  accept=\"image/*\" id=\"icon-button-file\" type=\"file\" \n                                            onChange={\n                                                (e) => {\n                                                    //handleChange\n                                                    var filename = e.target.value.match(/[^\\\\/]*$/)[0];\n                                                    console.log(filename)\n                                                    handleChangeImg(e, filename);\n                                                \n                                                }\n                                            } name=\"img\"\n                                        />\n                                        {editing ?\n                                            (<img height=\"50\" width={50} src={require(`../imagenes/${ejemplar.img}`) ? require(`../imagenes/${ejemplar.img}`) : \"\"} />)\n                                            : null}\n\n                                        <IconButton color=\"secondary\" aria-label=\"upload picture\" component=\"span\" >\n                                            <PhotoCamera />\n                                        </IconButton>\n                                        \n                                    </label>\n\n                                    <Button variant=\"contained\" color=\"secondary\" type=\"submit\" htmlFor=\"form-ejemplar\"\n                                        sx={{\n\n                                            display: 'block',\n                                            margin: '.5 rem 0'\n                                        }}>Publicar\n                                    </Button>\n                                </Box>\n                            </form>\n                        </CardContent>\n                    </Card>\n                </Grid>\n            </Grid>\n        </div>\n    )\n\n}\n\nexport default NuevoEjemplar;"]},"metadata":{},"sourceType":"module"}