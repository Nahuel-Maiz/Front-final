{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\nahue\\\\OneDrive\\\\Escritorio\\\\Final Taller Integracion\\\\Front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\nahue\\\\OneDrive\\\\Escritorio\\\\Final Taller Integracion\\\\Front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\nahue\\\\OneDrive\\\\Escritorio\\\\Final Taller Integracion\\\\Front\\\\src\\\\componentes\\\\Detalle.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Card, CardContent, CardMedia, Button, Typography, Container, Rating } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { useParams } from \"react-router-dom\";\nimport AddShoppingCartIcon from \"@mui/icons-material/AddShoppingCart\";\nimport \"../hojas-de-estilo/Detalle.css\";\nimport BarraBusqueda from './BarraBusqueda';\nimport { Link } from 'react-router-dom';\nimport { createPayment } from \"../services/mercado.service\";\n\nconst ListadeLibros2 = () => {\n  let _useParams = useParams(),\n      id_ejemplar = _useParams.id_ejemplar;\n\n  const Comprar = (cantidad, precioTotal) => {\n    let search = window.location.search;\n    let params = new URLSearchParams(search);\n    let Email = params.get(\"carrito\");\n    createPayment(Email, cantidad, precioTotal).then(res => window.location.href = res.init_point).catch(console.error);\n  };\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        ejemplares1 = _useState2[0],\n        setEjemplares = _useState2[1];\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        count = _useState4[0],\n        setCount = _useState4[1];\n\n  const sumar = () => {\n    setCount(count + 1);\n  };\n\n  const restar = () => {\n    setCount(count - 1);\n  };\n\n  const getEjemplar = async () => {\n    try {\n      const response = await fetch(\"http://localhost:4000/Ejemplar/\".concat(id_ejemplar));\n      const jsonData = await response.json();\n      console.log(\"Carga de ejemplares\", jsonData);\n      setEjemplares(jsonData);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  useEffect(() => {\n    getEjemplar();\n  }, []);\n\n  const cargarEnCarrito = () => {\n    // Leemos localStorage\n    const datosEnCarrito = JSON.parse(localStorage.getItem(\"carrito\"));\n    const libroExiste = datosEnCarrito.some(item => item.titulo === ejemplares1.titulo);\n\n    if (libroExiste) {\n      const upLoadedBook = datosEnCarrito.find(item => item.titulo === ejemplares1.titulo);\n      const img = ejemplares1.img ? require(\"../imagenes/\".concat(ejemplares1.img)) : \"\";\n      upLoadedBook.img = img;\n      const cantidad = parseInt(upLoadedBook.cantidadEnCarrito) + 1;\n      console.log(cantidad);\n\n      const libro = _objectSpread({}, upLoadedBook, {\n        cantidadEnCarrito: cantidad\n      });\n\n      const ListaDelibroActualizado = datosEnCarrito.map(item => {\n        if (item.titulo === ejemplares1.titulo) {\n          return libro;\n        }\n      });\n      localStorage.setItem(\"carrito\", JSON.stringify(ListaDelibroActualizado));\n    } else {\n      const img = ejemplares1.img ? require(\"../imagenes/\".concat(ejemplares1.img)) : \"\";\n      ejemplares1.img = img;\n      ejemplares1.cantidadEnCarrito = 1;\n      datosEnCarrito.push(ejemplares1);\n      localStorage.setItem(\"carrito\", JSON.stringify(datosEnCarrito));\n    }\n  };\n\n  const titulo = ejemplares1.titulo,\n        sinopsis = ejemplares1.sinopsis,\n        editorial = ejemplares1.editorial,\n        autor = ejemplares1.autor,\n        anioedicion = ejemplares1.anioedicion,\n        tipoencuadernado = ejemplares1.tipoencuadernado,\n        genero = ejemplares1.genero,\n        stock = ejemplares1.stock,\n        precioactual = ejemplares1.precioactual,\n        isbn = ejemplares1.isbn;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"400\",\n    className: \"contenedor-detalle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"busquedet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BarraBusqueda, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Card, {\n    sx: {\n      display: \"flex\",\n      backgroundColor: \"transparent\",\n      boxShadow: 0,\n      borderRadius: 8\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardMedia, {\n    sx: {\n      width: 231,\n      margin: 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"fotografia\",\n    src: ejemplares1.img ? require(\"../imagenes/\".concat(ejemplares1.img)) : \"\",\n    alt: \"Libro no encontrado\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      margin: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    sx: {\n      flex: \"1 0 auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\",\n    color: \"white\",\n    fontFamily: \"Roboto\",\n    fontSize: 40,\n    lineHeight: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, titulo), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1,\n    component: \"div\",\n    fontSize: 20,\n    fontFamily: \"Roboto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }\n  }, sinopsis, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, \"\\u2022 Editorial: \", editorial), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, \"\\u2022 Genero: \", genero), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, \"\\u2022 Autor: \", autor), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, \"\\u2022 A\\xF1o de edicion: \", anioedicion), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, \"\\u2022 Tipo de encuadernaci\\xF3n: \", tipoencuadernado), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, \"\\u2022 Stock: \", stock), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }, \"\\u2022 ISBN: \", isbn), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"#E7E7E7\",\n    lineHeight: 1.2,\n    component: \"div\",\n    fontFamily: \"Roboto\",\n    fontSize: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  }, \"\\u2022 Precio: $\", precioactual))), /*#__PURE__*/React.createElement(Card, {\n    sx: {\n      maxWidth: 600,\n      backgroundColor: \"transparent\",\n      boxShadow: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    sx: {\n      backgroundColor: \"#8381FF\",\n      borderRadius: 25,\n      margin: 0.8,\n      fontFamily: \"Roboto\"\n    },\n    onClick: () => Comprar(1, precioactual),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, \"Comprar\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 15\n    }\n  }, \"valor: \", count), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => sumar(),\n    sx: {\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 15\n    }\n  }, \"+\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => restar(),\n    sx: {\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, \"--\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => cargarEnCarrito(),\n    variant: \"contained\",\n    sx: {\n      backgroundColor: \"#8381FF\",\n      borderRadius: 25,\n      margin: 0.8,\n      fontFamily: \"Roboto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }, \"A\\xF1adir al carrito \", /*#__PURE__*/React.createElement(AddShoppingCartIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 35\n    }\n  })), /*#__PURE__*/React.createElement(Rating, {\n    name: \"half-rating\",\n    defaultValue: 2.5,\n    precision: 0.5,\n    size: \"medium\",\n    marginLeft: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default ListadeLibros2;","map":{"version":3,"sources":["C:/Users/nahue/OneDrive/Escritorio/Final Taller Integracion/Front/src/componentes/Detalle.jsx"],"names":["React","useState","useEffect","Card","CardContent","CardMedia","Button","Typography","Container","Rating","Box","useParams","AddShoppingCartIcon","BarraBusqueda","Link","createPayment","ListadeLibros2","id_ejemplar","Comprar","cantidad","precioTotal","search","window","location","params","URLSearchParams","Email","get","then","res","href","init_point","catch","console","error","ejemplares1","setEjemplares","count","setCount","sumar","restar","getEjemplar","response","fetch","jsonData","json","log","err","message","cargarEnCarrito","datosEnCarrito","JSON","parse","localStorage","getItem","libroExiste","some","item","titulo","upLoadedBook","find","img","require","parseInt","cantidadEnCarrito","libro","ListaDelibroActualizado","map","setItem","stringify","push","sinopsis","editorial","autor","anioedicion","tipoencuadernado","genero","stock","precioactual","isbn","display","backgroundColor","boxShadow","borderRadius","width","margin","flexDirection","flex","maxWidth","fontFamily"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Button,\r\n  Typography,\r\n  Container,\r\n  Rating,\r\n} from \"@mui/material\";\r\nimport { Box } from \"@mui/system\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport AddShoppingCartIcon from \"@mui/icons-material/AddShoppingCart\";\r\nimport \"../hojas-de-estilo/Detalle.css\";\r\nimport BarraBusqueda from './BarraBusqueda';\r\nimport { Link } from 'react-router-dom';\r\nimport { createPayment } from \"../services/mercado.service\";\r\n\r\nconst ListadeLibros2 = () => {\r\n  let { id_ejemplar } = useParams();\r\n\r\n  const Comprar = (cantidad, precioTotal) => {\r\n    let search = window.location.search;\r\n    let params = new URLSearchParams(search);\r\n    let Email = params.get(\"carrito\");\r\n    createPayment(Email, cantidad, precioTotal)\r\n      .then((res) => (window.location.href = res.init_point))\r\n      .catch(console.error);\r\n  };\r\n\r\n  const [ejemplares1, setEjemplares] = useState([]);\r\n\r\n  const [count, setCount] = useState(0)\r\n\r\n  const sumar = () => {\r\n    setCount(count + 1);\r\n  }\r\n\r\n  const restar = () => {\r\n    setCount(count - 1);\r\n  }\r\n\r\n  const getEjemplar = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost:4000/Ejemplar/${id_ejemplar}`\r\n      );\r\n      const jsonData = await response.json();\r\n      console.log(\"Carga de ejemplares\", jsonData);\r\n      setEjemplares(jsonData);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getEjemplar();\r\n  }, []);\r\n\r\n  const cargarEnCarrito = () => {\r\n    // Leemos localStorage\r\n    const datosEnCarrito = JSON.parse(localStorage.getItem(\"carrito\"));\r\n    const libroExiste = datosEnCarrito.some(\r\n      (item) => item.titulo === ejemplares1.titulo\r\n    );\r\n\r\n    if (libroExiste) {\r\n      const upLoadedBook = datosEnCarrito.find(\r\n        (item) => item.titulo === ejemplares1.titulo\r\n      );\r\n      const img = ejemplares1.img\r\n        ? require(`../imagenes/${ejemplares1.img}`)\r\n        : \"\";\r\n      upLoadedBook.img = img;\r\n\r\n      const cantidad = parseInt(upLoadedBook.cantidadEnCarrito) + 1;\r\n      console.log(cantidad);\r\n      const libro = {\r\n        ...upLoadedBook,\r\n        cantidadEnCarrito: cantidad,\r\n      };\r\n\r\n      const ListaDelibroActualizado = datosEnCarrito.map((item) => {\r\n        if (item.titulo === ejemplares1.titulo) {\r\n          return libro;\r\n        }\r\n      });\r\n      localStorage.setItem(\"carrito\", JSON.stringify(ListaDelibroActualizado));\r\n    } else {\r\n      const img = ejemplares1.img\r\n        ? require(`../imagenes/${ejemplares1.img}`)\r\n        : \"\";\r\n      ejemplares1.img = img;\r\n      ejemplares1.cantidadEnCarrito = 1;\r\n      datosEnCarrito.push(ejemplares1);\r\n      localStorage.setItem(\"carrito\", JSON.stringify(datosEnCarrito));\r\n    }\r\n  };\r\n\r\n  const {\r\n    titulo,\r\n    sinopsis,\r\n    editorial,\r\n    autor,\r\n    anioedicion,\r\n    tipoencuadernado,\r\n    genero,\r\n    stock,\r\n    precioactual,\r\n    isbn,\r\n  } = ejemplares1;\r\n\r\n  return (\r\n    <>\r\n      <Container maxWidth=\"400\" className=\"contenedor-detalle\">\r\n      <h1 className='busquedet'><BarraBusqueda/></h1>\r\n        <Card\r\n          sx={{\r\n            display: \"flex\",\r\n            backgroundColor: \"transparent\",\r\n            boxShadow: 0,\r\n            borderRadius: 8,\r\n          }}\r\n        >\r\n          <CardMedia sx={{ width: 231, margin: 3 }}>\r\n            <img\r\n              className=\"fotografia\"\r\n              src={\r\n                ejemplares1.img ? require(`../imagenes/${ejemplares1.img}`) : \"\"\r\n              }\r\n              alt=\"Libro no encontrado\"\r\n            />\r\n          </CardMedia>\r\n          <Box sx={{ display: \"flex\", flexDirection: \"column\", margin: 1 }}>\r\n            <CardContent sx={{ flex: \"1 0 auto\" }}>\r\n              <Typography\r\n                component=\"div\"\r\n                variant=\"h5\"\r\n                color=\"white\"\r\n                fontFamily=\"Roboto\"\r\n                fontSize={40}\r\n                lineHeight={2}\r\n              >\r\n                {titulo}\r\n              </Typography>\r\n              <Typography\r\n                variant=\"subtitle1\"\r\n                color=\"#E7E7E7\"\r\n                lineHeight={1}\r\n                component=\"div\"\r\n                fontSize={20}\r\n                fontFamily=\"Roboto\"\r\n              >\r\n                {sinopsis}\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Editorial: {editorial}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Genero: {genero}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Autor: {autor}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Año de edicion: {anioedicion}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Tipo de encuadernación: {tipoencuadernado}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Stock: {stock}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • ISBN: {isbn}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"subtitle1\"\r\n                  color=\"#E7E7E7\"\r\n                  lineHeight={1.2}\r\n                  component=\"div\"\r\n                  fontFamily={\"Roboto\"}\r\n                  fontSize={20}\r\n                >\r\n                  • Precio: ${precioactual}\r\n                </Typography>\r\n              </Typography>\r\n            </CardContent>\r\n            <Card\r\n              sx={{\r\n                maxWidth: 600,\r\n                backgroundColor: \"transparent\",\r\n                boxShadow: 0,\r\n              }}\r\n            >\r\n              <Button\r\n                variant=\"contained\"\r\n                sx={{\r\n                  backgroundColor: \"#8381FF\",\r\n                  borderRadius: 25,\r\n                  margin: 0.8,\r\n                  fontFamily: \"Roboto\",\r\n                }}\r\n                onClick={() =>\r\n                  Comprar(1, precioactual)}\r\n              >\r\n                Comprar\r\n              </Button>\r\n\r\n              <h1>\r\n                    valor: {count}\r\n              </h1>\r\n              <Button onClick={() => sumar()}\r\n                  sx={{\r\n                  backgroundColor: \"white\"}}\r\n                  >\r\n                    +\r\n              </Button>\r\n              <Button onClick={() => restar()}\r\n                  sx={{\r\n                  backgroundColor: \"white\"}}\r\n                  >\r\n                    --\r\n              </Button>\r\n\r\n              <Button\r\n                onClick={() => cargarEnCarrito()}\r\n                variant=\"contained\"\r\n                sx={{\r\n                  backgroundColor: \"#8381FF\",\r\n                  borderRadius: 25,\r\n                  margin: 0.8,\r\n                  fontFamily: \"Roboto\",\r\n                }}\r\n              >\r\n                Añadir al carrito <AddShoppingCartIcon />\r\n              </Button>\r\n              <Rating\r\n                name=\"half-rating\"\r\n                defaultValue={2.5}\r\n                precision={0.5}\r\n                size=\"medium\"\r\n                marginLeft={2}\r\n              />\r\n            </Card>\r\n          </Box>\r\n        </Card>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ListadeLibros2;"]},"metadata":{},"sourceType":"module"}